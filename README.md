# KYBERSWAP SDK
> Typescript SDK for interacting with Kyberswap Aggregator Service

## Install

```console
npm i kyberswap-sdk
```

```console
bun add kyberswap-sdk
```

## Usage

```ts
import { KyberSwap } from "kyberswap-sdk";
import { ChainIdentifier, NATIVE_TOKEN_ADDRESS } from "kyberswap-sdk";

// initialize the KyberSwap object
const kyberSwap = new KyberSwap();

// query the swap route
// create the params to query the swap route
const params = {
  chainName: ChainIdentifier.ETHEREUM,
  tokenIn: NATIVE_TOKEN_ADDRESS,
  tokenOut: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',
  amountIn: '1000000000000000000',
};

// call the method
const swapRoute = await kyberSwap.getSwapRoute(params);

// output to terminal
console.dir(swapRoute, { depth: null });

// Then use the route data to get encoded data
// create the params to obtain the encoded swap data
const postSwapParams = {
  chainName: ChainIdentifier.ETHEREUM,
  routeSummary: swapRoute.data.routeSummary,
  sender: '0xd06c478DbfE22c014EA0E76A0BB216f346e2EbDB', // Example sender address
  recipient: '0xd06c478DbfE22c014EA0E76A0BB216f346e2EbDB', // Example recipient address
};

// call the method
const encodedDataResult = await kyberSwap.postSwapRouteForEncodedData(postSwapParams);

// output to terminal
console.dir(encodedDataResult, { depth: null });
```
Output

```console

==> getSwapRoute
{
  code: 0,
  message: "successfully",
  data: {
    routeSummary: {
      tokenIn: "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
      amountIn: "1000000000000000000",
      amountInUsd: "2524.8663894547",
      tokenOut: "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
      amountOut: "2521990041",
      amountOutUsd: "2524.7581934580458",
      gas: "238000",
      gasPrice: "801352751",
      gasUsd: "0.4815474532490767",
      l1FeeUsd: "0",
      extraFee: {
        feeAmount: "",
        chargeFeeBy: "",
        isInBps: false,
        feeReceiver: "",
      },
      route: [
        [
          {
            pool: "0x0d4a11d5eeaac28ec3f61d100daf4d40471f1852",
            tokenIn: "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
            tokenOut: "0xdac17f958d2ee523a2206206994597c13d831ec7",
            swapAmount: "1000000000000000000",
            amountOut: "2520776645",
            exchange: "uniswap",
            poolType: "uniswap-v2",
            poolExtra: {
              fee: 3,
              feePrecision: 1000,
              blockNumber: 22601790,
            },
            extra: {
              ri: "e721bb6e-b768-455b-abc7-7e91959c58cd",
            },
          }, {
            pool: "0xca5b3ef9770bb95940bd4e0bff5ead70a5973d904a8b370b52147820e61a2ff6",
            tokenIn: "0xdac17f958d2ee523a2206206994597c13d831ec7",
            tokenOut: "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
            swapAmount: "2520776645",
            amountOut: "2521990041",
            exchange: "ekubo",
            poolType: "ekubo",
            poolExtra: {
              core: "0xe0e0e08a6a4b9dc7bd67bcb7aade5cf48157d444",
              poolKey: {
                token0: "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
                token1: "0xdac17f958d2ee523a2206206994597c13d831ec7",
                config: [
                  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                  0, 83, 226, 214, 35, 141, 163, 0, 0, 0, 50
                ],
              },
            },
            extra: {
              skipAhead: 0,
              isToken1: true,
            },
          }
        ]
      ],
      routeID: "e721bb6e-b768-455b-abc7-7e91959c58cd",
      checksum: "12278963818476373499",
      timestamp: 1748683415,
    },
    routerAddress: "0x6131B5fae19EA4f9D964eAc0408E4408b66337b5",
  },
  requestId: "e721bb6e-b768-455b-abc7-7e91959c58cd",
}

==> postSwapRouteForEncodedData
{
  code: 0,
  message: "successfully",
  data: {
    amountIn: "1000000000000000000",
    amountInUsd: "2524.8663894547",
    amountOut: "2521990041",
    amountOutUsd: "2524.5438363581907",
    gas: "238000",
    gasUsd: "0.4815474532490767",
    additionalCostUsd: "0",
    additionalCostMessage: "",
    outputChange: {
      amount: "0",
      percent: 0,
      level: 0,
    },
    data: "0xe21fd0e900000000000000000000000000000000000000000000000000000000000000200000000000000000000000006e4141d33021b52c91c28608403db4a0ffb50ec6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000560000000000000000000000000000000000000000000000000000000000000076000000000000000000000000000000000000000000000000000000000000004a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000d06c478dbfe22c014ea0e76a0bb216f346e2ebdb00000000000000000000000000000000000000000000000000000000683acf470000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000040593611990000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000001000000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f1852000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec70000000000000000000000006e4141d33021b52c91c28608403db4a0ffb50ec60000000000000000000000000000000000000000000000000de0b6b3a7640000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000003e8000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000404c134a970000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000e0e0e08a6a4b9dc7bd67bcb7aade5cf48157d44400000000000000000000000000000000000000000000000000000000963fffc5000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec70000000000000000000000000000000000000000000053e2d6238da3000000320000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009d9000000000000000000000000965283990000000000000000000000004f82e73edb06d29ff62c91ec8f5ff06571bdeb29000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000d06c478dbfe22c014ea0e76a0bb216f346e2ebdb0000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000000000000096528399000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027d7b22536f75726365223a226b7962657273776170222c22416d6f756e74496e555344223a22323532342e38363633383934353437222c22416d6f756e744f7574555344223a22323532342e35343338333633353831393037222c22526566657272616c223a22222c22466c616773223a302c22416d6f756e744f7574223a2232353231393930303431222c2254696d657374616d70223a313734383638333431352c22526f7574654944223a2265373231626236652d623736382d343535622d616263372d3765393139353963353863643a36663038343235612d626434392d343362612d613039332d366134313636666137653837222c22496e74656772697479496e666f223a7b224b65794944223a2231222c225369676e6174757265223a225a5564532b6c6b435a474662397663446a5a444642732b614949506c536c47324d68733561365139574d676a797a6c786668754a335151457a556170346455382b32697570683474676c4a794e4a43666e414c4b73447a453548435a4a6b50646b7872724842442f54324458766d547466385862554d4a766643744e7731497564426e394344656d736d795567596c5a53424d59446439634149464b4c5a6571594748722b77554a4f367a516449434d6b7a72316a4c675858726458564b7a516e493165427377505131615a66385a59496654533969797a502f44775844395438484f325a3533454830455a51716b4b67686c37524d54504d4639416f6e66537a32463043536f674e4d547956532f47476547674d746e544e6b6f5a36526565377442556738745447727069696d38505a336c524b7770433730345745686256345455647146725835464d674b6b6d647a30473547413d3d227d7d000000",
    routerAddress: "0x6131B5fae19EA4f9D964eAc0408E4408b66337b5",
    transactionValue: "1000000000000000000",
  },
  requestId: "6f08425a-bd49-43ba-a093-6a4166fa7e87",
}
```